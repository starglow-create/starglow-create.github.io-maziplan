<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>æ¸¸æˆåŒ–ç å­—ç½‘ç«™</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            transition: background 0.5s ease;
            color: #4e342e;
            text-shadow: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            background-color: #fdf6e3;
        }

        .card {
            background: linear-gradient(135deg, #fbe9e7 0%, #ffe0b2 100%);
            border-radius: 15px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .card h2 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.5em;
            color: #6d4c41;
        }

        .card input,
        .card button {
            margin-bottom: 10px;
            padding: 8px;
            border: none;
            border-radius: 5px;
        }

        .card input {
            background-color: #fff8e1;
            border: 1px solid #ffcc80;
        }

        .card button {
            background-color: #ffb74d;
            color: white;
            cursor: pointer;
        }

        .card button:hover {
            background-color: #ffa726;
        }

        #progress-bar {
            width: 100%;
            background-color: #f3f3f3;
            border-radius: 5px;
            margin-top: 10px;
        }

        #progress {
            width: 0%;
            height: 30px;
            background-color: #4CAF50;
            text-align: center;
            line-height: 30px;
            color: white;
            border-radius: 5px;
        }

        #timer {
            font-size: 36px;
            margin: 10px 0;
        }

        #character-icon {
            width: 100px;
            height: 100px;
            margin-top: 10px;
        }

        /* æŸ±çŠ¶å›¾æ ·å¼ */
        .bar-chart {
            margin-top: 10px;
        }

        .bar {
            height: 20px;
            margin-bottom: 5px;
            border-radius: 5px;
            background-color: #4CAF50;
            text-align: right;
            padding-right: 5px;
            color: white;
        }

        @media screen and (orientation: landscape) {
            body {
                justify-content: space-around;
            }

            .card {
                width: 45%;
            }
        }
    </style>
</head>

<body>
    <!-- ç å­—è¿›åº¦ -->
    <div class="card" id="progress-section">
        <h2>ç å­—è¿›åº¦</h2>
        <input type="number" id="current-word-count" placeholder="å½“å‰ç å­—æ•°é‡">
        <input type="number" id="target-word-count" placeholder="ç›®æ ‡ç å­—æ•°é‡">
        <button onclick="updateProgress()">æ›´æ–°è¿›åº¦</button>
        <div id="progress-bar"></div>
        <p id="progress-text"></p>
    </div>

    <!-- ç²¾å½©è¯­å½• -->
    <div class="card" id="quote-section">
        <h2>ç²¾å½©è¯­å½•</h2>
        <p id="quote-text">â€œæˆåŠŸçš„ç§˜è¯€åœ¨äºåšæŒã€‚â€</p>
        <button onclick="getNewQuote()">æ¢ä¸€æ¡è¯­å½•</button>
    </div>

    <!-- ç•ªèŒ„æ—¶é’Ÿ -->
    <div class="card" id="pomodoro-section">
        <h2>ç•ªèŒ„æ—¶é’Ÿ</h2>
        <p id="timer">25:00</p>
        <button onclick="startTimer()">å¼€å§‹</button>
        <button onclick="stopTimer()">åœæ­¢</button>
        <button onclick="resetTimer()">é‡ç½®</button>
    </div>

    <!-- æ—¥æœˆå¹´è®¡åˆ’ -->
    <div class="card" id="plan-section">
        <h2>æ—¥æœˆå¹´è®¡åˆ’</h2>
        <input type="number" id="daily-target" placeholder="æ—¥ç›®æ ‡ç å­—æ•°é‡">
        <input type="number" id="monthly-target" placeholder="æœˆç›®æ ‡ç å­—æ•°é‡">
        <input type="number" id="yearly-target" placeholder="å¹´ç›®æ ‡ç å­—æ•°é‡">
        <button onclick="updatePlanProgress()">æ›´æ–°è®¡åˆ’è¿›åº¦</button>
        <p id="daily-progress"></p>
        <p id="monthly-progress"></p>
        <p id="yearly-progress"></p>
        <!-- æŸ±çŠ¶å›¾å®¹å™¨ -->
        <div class="bar-chart" id="plan-chart"></div>
    </div>

    <!-- å¥–åŠ±æƒ©ç½šæœºåˆ¶ -->
    <div class="card" id="reward-punishment-section">
        <h2>å¥–åŠ±æƒ©ç½šæœºåˆ¶</h2>
        <p id="reward-punishment-text">æš‚æ— å¥–åŠ±æˆ–æƒ©ç½š</p>
        <p id="gold-count">é‡‘å¸æ•°é‡: <span id="gold-value">0</span></p>
    </div>

    <!-- è¶£å‘³å°äººå›¾æ ‡ -->
    <div class="card" id="character-section">
        <h2>è¶£å‘³å°äºº</h2>
        <span id="character-icon">ğŸ˜€</span>
    </div>

    <!-- è‡ªå®šä¹‰èƒŒæ™¯éŸ³ä¹ -->
    <div class="card" id="music-section">
        <h2>è‡ªå®šä¹‰èƒŒæ™¯éŸ³ä¹</h2>
        <input type="file" id="music-file" accept="audio/*">
        <button onclick="playMusic()">æ’­æ”¾</button>
        <button onclick="pauseMusic()">æš‚åœ</button>
        <audio id="music-player"></audio>
    </div>

    <!-- è‡ªå®šä¹‰èƒŒæ™¯é¢œè‰²å’Œå›¾æ¡ˆ -->
    <div class="card" id="background-section">
        <h2>è‡ªå®šä¹‰èƒŒæ™¯</h2>
        <input type="color" id="background-color">
        <input type="file" id="background-image" accept="image/*">
        <button onclick="applyBackground()">åº”ç”¨</button>
        <button onclick="saveBackground()">ä¿å­˜</button>
    </div>

    <!-- è‡ªå®šä¹‰å¡ç‰‡é¢œè‰² -->
    <div class="card" id="card-color-section">
        <h2>è‡ªå®šä¹‰å¡ç‰‡é¢œè‰²</h2>
        <input type="color" id="card-color">
        <button onclick="applyCardColor()">åº”ç”¨</button>
        <button onclick="saveCardColor()">ä¿å­˜</button>
    </div>

    <script>
        // åŠ è½½æœ¬åœ°å­˜å‚¨çš„æ•°æ®
        let currentWordCount = parseInt(localStorage.getItem('currentWordCount')) || 0;
        let targetWordCount = parseInt(localStorage.getItem('targetWordCount')) || 0;
        let dailyTarget = parseInt(localStorage.getItem('dailyTarget')) || 0;
        let monthlyTarget = parseInt(localStorage.getItem('monthlyTarget')) || 0;
        let yearlyTarget = parseInt(localStorage.getItem('yearlyTarget')) || 0;
        let goldCount = parseInt(localStorage.getItem('goldCount')) || 0;

        // è¯»å–å­˜å‚¨çš„å¡ç‰‡é¢œè‰²
        let cardColor = localStorage.getItem('cardColor');
        if (cardColor) {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.style.backgroundColor = cardColor;
                card.style.backgroundImage = 'none';
            });
            document.getElementById('card-color').value = cardColor;
        }

        // è¯»å–å­˜å‚¨çš„èƒŒæ™¯è®¾ç½®
        let bgColor = localStorage.getItem('bgColor');
        let bgImage = localStorage.getItem('bgImage');
        if (bgColor) {
            document.body.style.backgroundColor = bgColor;
            document.getElementById('background-color').value = bgColor;
        }
        if (bgImage) {
            document.body.style.background = `url(${bgImage})`;
            document.body.style.backgroundSize = 'cover';
        }

        document.getElementById('current-word-count').value = currentWordCount;
        document.getElementById('target-word-count').value = targetWordCount;
        document.getElementById('daily-target').value = dailyTarget;
        document.getElementById('monthly-target').value = monthlyTarget;
        document.getElementById('yearly-target').value = yearlyTarget;
        document.getElementById('gold-value').textContent = goldCount;

        // ç å­—è¿›åº¦
        function updateProgress() {
            currentWordCount = parseInt(document.getElementById('current-word-count').value);
            targetWordCount = parseInt(document.getElementById('target-word-count').value);
            let progress = (currentWordCount / targetWordCount) * 100;
            // ç¡®ä¿è¿›åº¦ä¸è¶…è¿‡ 100%
            progress = Math.min(progress, 100);

            const progressBar = document.getElementById('progress-bar');
            progressBar.innerHTML = `<div id="progress" style="width: ${progress}%"></div>`;

            const progressText = document.getElementById('progress-text');
            progressText.textContent = `å·²å®Œæˆ ${currentWordCount}/${targetWordCount} å­—ï¼Œè¿›åº¦ï¼š${progress.toFixed(2)}%`;

            checkRewardPunishment(progress);

            // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('currentWordCount', currentWordCount);
            localStorage.setItem('targetWordCount', targetWordCount);
        }

        // ç²¾å½©è¯­å½•
        const quotes = [
            "â€œæˆåŠŸçš„ç§˜è¯€åœ¨äºåšæŒã€‚â€",
            "â€œæ¯ä¸€ä¸ªå­—éƒ½æ˜¯é€šå¾€æ¢¦æƒ³çš„ä¸€æ­¥ã€‚â€",
            "â€œå†™ä½œæ˜¯çµé­‚çš„å‡ºå£ã€‚â€",
            "â€œç¬”é”‹æ‰€è‡³ï¼Œçš†æ˜¯å¿ƒä¸­çš„å±±æ²³ã€‚â€",
            "â€œæ–‡å­—æ˜¯æ—¶é—´çš„ç¥ç€ï¼Œå‡å›ºç€ç¬é—´çš„çµæ„Ÿã€‚â€",
            "â€œåœ¨æ–‡å­—çš„æµ·æ´‹é‡Œï¼Œæ¯ä¸€æ¬¡ä¹¦å†™éƒ½æ˜¯ä¸€æ¬¡è¿œèˆªã€‚â€",
            "â€œå†™ä½œæ˜¯ç”¨æ–‡å­—æ­å»ºçš„æ—¶å…‰æœºï¼Œç©¿æ¢­äºæƒ³è±¡ä¸ç°å®ä¹‹é—´ã€‚â€",
            "â€œç”¨æ–‡å­—ç¼–ç»‡æ•…äº‹ï¼Œç”¨æ•…äº‹æ¸©æš–ä¸–ç•Œã€‚â€",
            "â€œæ¯ä¸€ä¸ªå­—ç¬¦éƒ½æ˜¯ä¸€é¢—æ˜Ÿè¾°ï¼Œæ±‡èšæˆç’€ç’¨çš„æ–‡å­¦å®‡å®™ã€‚â€",
            "â€œå†™ä½œæ˜¯ä¸€åœºä¸è‡ªå·±çš„å¯¹è¯ï¼Œæ¢å¯»å†…å¿ƒæ·±å¤„çš„å£°éŸ³ã€‚â€"
        ];

        function getNewQuote() {
            const randomIndex = Math.floor(Math.random() * quotes.length);
            const quoteText = document.getElementById('quote-text');
            quoteText.textContent = quotes[randomIndex];
        }

        // ç•ªèŒ„æ—¶é’Ÿ
        let timerInterval;
        let timeLeft = 25 * 60;

        function startTimer() {
            timerInterval = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                const timer = document.getElementById('timer');
                timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft > 0) {
                    timeLeft--;
                } else {
                    clearInterval(timerInterval);
                    alert('æ—¶é—´åˆ°ï¼ä¼‘æ¯ä¸€ä¸‹å§ã€‚');
                    // å®Œæˆä¸€ä¸ªç•ªèŒ„é’Ÿå¥–åŠ± 1 é‡‘å¸
                    goldCount++;
                    document.getElementById('gold-value').textContent = goldCount;
                    localStorage.setItem('goldCount', goldCount);
                    timeLeft = 25 * 60;
                    timer.textContent = '25:00';
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timeLeft = 25 * 60;
            const timer = document.getElementById('timer');
            timer.textContent = '25:00';
        }

        // æ—¥æœˆå¹´è®¡åˆ’
        function updatePlanProgress() {
            dailyTarget = parseInt(document.getElementById('daily-target').value);
            monthlyTarget = parseInt(document.getElementById('monthly-target').value);
            yearlyTarget = parseInt(document.getElementById('yearly-target').value);

            const dailyProgress = (currentWordCount / dailyTarget) * 100;
            const monthlyProgress = (currentWordCount / monthlyTarget) * 100;
            const yearlyProgress = (currentWordCount / yearlyTarget) * 100;

            document.getElementById('daily-progress').textContent = `æ—¥è®¡åˆ’è¿›åº¦ï¼š${dailyProgress.toFixed(2)}%`;
            document.getElementById('monthly-progress').textContent = `æœˆè®¡åˆ’è¿›åº¦ï¼š${monthlyProgress.toFixed(2)}%`;
            document.getElementById('yearly-progress').textContent = `å¹´è®¡åˆ’è¿›åº¦ï¼š${yearlyProgress.toFixed(2)}%`;

            checkRewardPunishment(dailyProgress);

            // æ›´æ–°æŸ±çŠ¶å›¾
            updateBarChart(dailyProgress, monthlyProgress, yearlyProgress);

            // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('dailyTarget', dailyTarget);
            localStorage.setItem('monthlyTarget', monthlyTarget);
            localStorage.setItem('yearlyTarget', yearlyTarget);
        }

        // æ›´æ–°æŸ±çŠ¶å›¾
        function updateBarChart(daily, monthly, yearly) {
            const chart = document.getElementById('plan-chart');
            chart.innerHTML = `
                <div class="bar" style="width: ${Math.min(daily, 100)}%">æ—¥è®¡åˆ’: ${daily.toFixed(2)}%</div>
                <div class="bar" style="width: ${Math.min(monthly, 100)}%">æœˆè®¡åˆ’: ${monthly.toFixed(2)}%</div>
                <div class="bar" style="width: ${Math.min(yearly, 100)}%">å¹´è®¡åˆ’: ${yearly.toFixed(2)}%</div>
            `;
        }

        // å¥–åŠ±æƒ©ç½šæœºåˆ¶
        function checkRewardPunishment(progress) {
            const rewardPunishmentText = document.getElementById('reward-punishment-text');
            const characterIcon = document.getElementById('character-icon');

            if (progress >= 100) {
                rewardPunishmentText.textContent = 'æ­å–œä½ ï¼Œå®Œæˆç›®æ ‡ï¼å¥–åŠ± 1 é‡‘å¸';
                characterIcon.textContent = 'ğŸ˜';
                goldCount++;
            } else if (progress < 50) {
                rewardPunishmentText.textContent = 'åŠ æ²¹å“¦ï¼Œè¿›åº¦è½åå•¦ï¼Œæƒ©ç½šæ‰£é™¤ 1 é‡‘å¸ï¼';
                characterIcon.textContent = 'ğŸ˜¢';
                if (goldCount > 0) {
                    goldCount--;
                }
            } else {
                rewardPunishmentText.textContent = 'ç»§ç»­ä¿æŒï¼Œä½ åšå¾—å¾ˆæ£’ï¼';
                characterIcon.textContent = 'ğŸ˜€';
            }

            document.getElementById('gold-value').textContent = goldCount;
            localStorage.setItem('goldCount', goldCount);
        }

        // è‡ªå®šä¹‰èƒŒæ™¯éŸ³ä¹åŠŸèƒ½
        const musicPlayer = document.getElementById('music-player');
        const musicFileInput = document.getElementById('music-file');

        function playMusic() {
            const file = musicFileInput.files[0];
            if (file) {
                const objectURL = URL.createObjectURL(file);
                musicPlayer.src = objectURL;
                musicPlayer.play();
            }
        }

        function pauseMusic() {
            musicPlayer.pause();
        }

        // è‡ªå®šä¹‰èƒŒæ™¯é¢œè‰²å’Œå›¾æ¡ˆåŠŸèƒ½
        const backgroundColorInput = document.getElementById('background-color');
        const backgroundImageInput = document.getElementById('background-image');

        function applyBackground() {
            const color = backgroundColorInput.value;
            const imageFile = backgroundImageInput.files[0];

            if (imageFile) {
                const objectURL = URL.createObjectURL(imageFile);
                document.body.style.background = `url(${objectURL})`;
                document.body.style.backgroundSize = 'cover';
            } else {
                document.body.style.backgroundColor = color;
            }
        }

        function saveBackground() {
            const color = backgroundColorInput.value;
            const imageFile = backgroundImageInput.files[0];

            if (imageFile) {
                const objectURL = URL.createObjectURL(imageFile);
                localStorage.setItem('bgImage', objectURL);
            } else {
                localStorage.removeItem('bgImage');
            }
            localStorage.setItem('bgColor', color);
            alert('èƒŒæ™¯è®¾ç½®å·²ä¿å­˜ï¼Œåˆ·æ–°é¡µé¢åç”Ÿæ•ˆã€‚');
        }

        // è‡ªå®šä¹‰å¡ç‰‡é¢œè‰²åŠŸèƒ½
        const cardColorInput = document.getElementById('card-color');

        function applyCardColor() {
            const color = cardColorInput.value;
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.style.backgroundColor = color;
                card.style.backgroundImage = 'none';
            });
        }

        function saveCardColor() {
            const color = cardColorInput.value;
            localStorage.setItem('cardColor', color);
            alert('å¡ç‰‡é¢œè‰²å·²ä¿å­˜ï¼Œåˆ·æ–°é¡µé¢åç”Ÿæ•ˆã€‚');
        }
    </script>
</body>

</html>
